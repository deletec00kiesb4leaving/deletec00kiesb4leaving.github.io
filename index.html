<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Coder's Terminal</title>
    <style>
        body {
            background: #1d1e20;
            color: #87CEEB;
            font-family: 'Courier New', monospace;
            margin: 0;
            padding: 20px;
            overflow: hidden;
        }
        
        #terminal {
            max-width: 800px;
            margin: 0 auto;
            min-height: 400px;
        }
        
        .blink {
            animation: blink 1s step-end infinite;
        }
        
        @keyframes blink {
            50% { opacity: 0; }
        }
        
        .prompt {
            color: #87CEEB;
        }
        
        .command {
            color: #FFFFFF;
        }
        
        #input-line {
            display: flex;
            align-items: center;
        }
        
        #input {
            background: none;
            border: none;
            color: #FFFFFF;
            font-family: 'Courier New', monospace;
            font-size: 16px;
            outline: none;
            width: 100%;
        }
        
        a {
            color: #87CEEB;
            text-decoration: none;
        }
        
        a:hover {
            text-decoration: underline;
        }

        ul {
            list-style-type: none;
            padding-left: 20px;
        }

        .hidden {
            display: none;
        }

        .disabled {
            pointer-events: none;
            opacity: 0.5;
        }
    </style>
</head>
<body>
    <div id="terminal">
        <div id="output">
            <p>Welcome to [Your Name]'s Coding Terminal. Type 'help' to start.</p>
        </div>
        <div id="input-line">
            <span class="prompt">user@code:~$ </span>
            <input type="text" id="input" autofocus>
        </div>
    </div>

    <script>
        const commands = {
            'help': 'Available commands: clear, ls, ls -l, whoami, cat [filename], cd [project], top',
            'clear': '',
            'ls': `dir contents:\n- project-1/  (<a href="https://github.com/xAI/project-1">View</a>)\n- project-2/  (<a href="https://github.com/xAI/project-2">View</a>)\n- project-3/  (<a href="https://github.com/xAI/project-3">View</a>)\n- README.md`,
            'ls -l': '', // Handled dynamically
            'whoami': '[Your Name]',
            'top': ''
        };

        const fileContents = {
            'project-1/': '[Project 1 content goes here]\nThis is a placeholder for Project 1 details.\nLink: <a href="https://github.com/xAI/project-1">View</a>',
            'project-2/': '[Project 2 content goes here]\nThis is a placeholder for Project 2 details.\nLink: <a href="https://github.com/xAI/project-2">View</a>',
            'project-3/': '[Project 3 content goes here]\nThis is a placeholder for Project 3 details.\nLink: <a href="https://github.com/xAI/project-3">View</a>',
            'readme.md': 'Welcome to [Your Name]\'s Project Repository\n\nThis is a README file containing basic information about my projects.\n\nContact: [your.email@example.com]\nGitHub: [github.com/username]'
        };

        const skills = [
            { name: 'Python', cpu: '15.2', mem: '5.1', time: '12:34', pid: '1001', state: 'R', port: '8080' },
            { name: 'JavaScript', cpu: '12.8', mem: '4.9', time: '10:15', pid: '1002', state: 'S', port: '3000' },
            { name: 'C++', cpu: '8.5', mem: '3.2', time: '08:22', pid: '1003', state: 'R', port: '5000' },
            { name: 'Java', cpu: '10.1', mem: '6.0', time: '15:47', pid: '1004', state: 'S', port: '8081' },
            { name: 'HTML/CSS', cpu: '5.3', mem: '2.8', time: '06:19', pid: '1005', state: 'R', port: '80' },
            { name: 'SQL', cpu: '7.9', mem: '3.5', time: '09:33', pid: '1006', state: 'S', port: '3306' },
            { name: 'Git', cpu: '4.2', mem: '1.9', time: '04:55', pid: '1007', state: 'R', port: '9418' },
            { name: 'Node.js', cpu: '11.6', mem: '5.5', time: '11:28', pid: '1008', state: 'S', port: '3001' },
            { name: 'React', cpu: '9.4', mem: '4.7', time: '07:41', pid: '1009', state: 'R', port: '3002' },
            { name: 'Linux', cpu: '6.7', mem: '3.0', time: '05:12', pid: '1010', state: 'S', port: '22' },
            { name: 'CyberSec', cpu: '13.0', mem: '6.2', time: '14:09', pid: '1011', state: 'R', port: '443' },
            { name: 'Docker', cpu: '8.1', mem: '4.0', time: '10:50', pid: '1012', state: 'S', port: '2375' }
        ];

        const output = document.getElementById('output');
        const input = document.getElementById('input');
        const inputLine = document.getElementById('input-line');
        let commandHistory = [];
        let historyIndex = -1;
        let topInterval = null;

        // Function to add text to the output
        function addOutput(text) {
            if (text === '') {
                output.innerHTML = '';
                return;
            }
            const p = document.createElement('p');
            p.innerHTML = text;
            output.appendChild(p);
            window.scrollTo(0, document.body.scrollHeight);
        }

        // Function to start the top-like display
        function startTop() {
            output.innerHTML = ''; // Clear output for top
            inputLine.classList.add('hidden'); // Hide input line
            input.disabled = true; // Disable input while top is running
            input.classList.add('disabled'); // Add visual indication of being disabled

            function updateTop() {
                const now = new Date();
                const timestamp = now.toLocaleString('en-US', { hour12: false });
                const loadAvg = '1.23, 0.95, 0.87'; // Static for simplicity
                let topOutput = `top - ${timestamp} user: [Your Name] load average: ${loadAvg}<br>`;
                topOutput += 'Tasks: 12 total<br><br>';
                // Header with fixed widths
                topOutput += 'PID    COMMAND         #PORT  %CPU  %MEM  TIME     STATE<br>';
                topOutput += '<ul>';
                skills.forEach(skill => {
                    // Ensure TIME is formatted as HH:MM:SS if needed
                    let formattedTime = skill.time.length === 5 ? `00:${skill.time}` : skill.time;
                    topOutput += `<li>` +
                        `${skill.pid.padEnd(6)} ` +
                        `${skill.name.padEnd(15)} ` +
                        `${('#' + skill.port).padEnd(7)} ` +
                        `${skill.cpu.padEnd(5)} ` +
                        `${skill.mem.padEnd(5)} ` +
                        `${formattedTime.padEnd(8)} ` +
                        `${skill.state}` +
                        `</li>`;
                });
                topOutput += '</ul><br>Press Ctrl+C to quit';
                output.innerHTML = `<p>${topOutput}</p>`;
            }
            
            updateTop(); // Initial display
            topInterval = setInterval(updateTop, 1000); // Update every second
        }

        // Function to display ls -l in list format
        function displayLsLong() {
            let lsOutput = 'dir contents (long format):<br><ul>';
            lsOutput += `<li>project-1/ - [Description 1] (<a href="https://github.com/xAI/project-1">View</a>)</li>`;
            lsOutput += `<li>project-2/ - [Description 2] (<a href="https://github.com/xAI/project-2">View</a>)</li>`;
            lsOutput += `<li>project-3/ - [Description 3] (<a href="https://github.com/xAI/project-3">View</a>)</li>`;
            lsOutput += `<li>README.md - Project documentation</li>`;
            lsOutput += '</ul>';
            addOutput(lsOutput);
        }

        // Handle command input
        input.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                const command = input.value.trim().toLowerCase();
                const prompt = document.querySelector('.prompt').textContent;
                
                if (command !== '') {
                    commandHistory.unshift(command);
                    historyIndex = -1;
                }
                
                addOutput(`${prompt}${command}`);
                
                if (command in commands) {
                    if (command === 'top') {
                        startTop();
                    } else if (command === 'ls -l') {
                        displayLsLong();
                    } else {
                        addOutput(commands[command]);
                    }
                } 
                else if (command.startsWith('cat ')) {
                    const filename = command.slice(4).trim();
                    if (filename in fileContents) {
                        addOutput(fileContents[filename]);
                    } else if (filename === '') {
                        addOutput('cat: missing file operand. Try \'cat [filename]\'');
                    } else {
                        addOutput(`cat: ${filename}: No such file or directory`);
                    }
                }
                else if (command.startsWith('cd ')) {
                    const project = command.slice(3).trim(); // Extract project name after 'cd '
                    if (project === '') {
                        addOutput('cd: missing directory operand. Try \'cd [project]\'');
                    } else if (project === 'project-1/' || project === 'project-1') {
                        window.open('https://github.com/xAI/project-1', '_blank'); // Open GitHub repo in new tab
                        addOutput(`Navigating to project-1/ (GitHub repository)`);
                    } else if (project === 'project-2/' || project === 'project-2') {
                        window.open('https://github.com/xAI/project-2', '_blank'); // Open GitHub repo in new tab
                        addOutput(`Navigating to project-2/ (GitHub repository)`);
                    } else if (project === 'project-3/' || project === 'project-3') {
                        window.open('https://github.com/xAI/project-3', '_blank'); // Open GitHub repo in new tab
                        addOutput(`Navigating to project-3/ (GitHub repository)`);
                    } else {
                        addOutput(`cd: ${project}: No such directory`);
                    }
                }
                else if (command !== '') {
                    addOutput(`Command not found: ${command}. Type 'help' for available commands.`);
                }
                
                input.value = '';
            }
        });

        // Handle arrow keys for command history
        input.addEventListener('keydown', function(e) {
            if (!input.disabled) { // Only process keystrokes if input is enabled
                if (e.key === 'ArrowUp') {
                    e.preventDefault();
                    if (commandHistory.length === 0) return;
                    
                    if (historyIndex < commandHistory.length - 1) {
                        historyIndex++;
                    }
                    
                    if (historyIndex >= 0) {
                        input.value = commandHistory[historyIndex];
                    }
                } else if (e.key === 'ArrowDown') {
                    e.preventDefault();
                    if (commandHistory.length === 0) return;
                    
                    if (historyIndex > -1) {
                        historyIndex--;
                    }
                    
                    if (historyIndex >= 0) {
                        input.value = commandHistory[historyIndex];
                    } else {
                        input.value = '';
                    }
                }
            }
        });

        // Handle Ctrl+C to exit top at document level
        document.addEventListener('keydown', function(e) {
            if (e.ctrlKey && e.key === 'c' && topInterval) {
                e.preventDefault(); // Prevent default Ctrl+C behavior
                clearInterval(topInterval);
                topInterval = null;
                output.innerHTML = '';
                inputLine.classList.remove('hidden'); // Show input line again
                input.disabled = false; // Re-enable input
                input.classList.remove('disabled'); // Remove disabled visual indication
                addOutput('user@code:~$ top terminated');
                input.value = ''; // Clear input field
                input.focus(); // Focus on input for next command
            }
        });

        // Focus input on click anywhere, but only if not disabled
        document.addEventListener('click', () => {
            if (!input.disabled) {
                input.focus();
            }
        });
    </script>
</body>
</html>
